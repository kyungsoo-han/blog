# @EventListener ì™„ë²½ ê°€ì´ë“œ




Springì˜ `@EventListener`ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ë‚´ì—ì„œ **ì´ë²¤íŠ¸ ê¸°ë°˜ í”„ë¡œê·¸ë˜ë°(event-driven architecture)** ì„ êµ¬í˜„í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ëŠ” ê¸°ëŠ¥ì…ë‹ˆë‹¤. ì´ëŠ” ì½”ë“œ ê°„ì˜ ê²°í•©ë„ë¥¼ ë‚®ì¶”ê³ , í™•ì¥ì„±ê³¼ ìœ ì§€ë³´ìˆ˜ì„±ì„ ë†’ì´ëŠ” ë° ìœ ìš©í•©ë‹ˆë‹¤.

---

## ğŸ”§ ê¸°ë³¸ ê°œë…

* Springì—ì„œëŠ” ì´ë²¤íŠ¸ë¥¼ ê°ì²´ë¡œ ì •ì˜í•˜ê³ , ì´ ì´ë²¤íŠ¸ê°€ ë°œìƒí–ˆì„ ë•Œ íŠ¹ì • ë©”ì„œë“œë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•©ë‹ˆë‹¤.
* `@EventListener`ëŠ” íŠ¹ì • ì´ë²¤íŠ¸ í´ë˜ìŠ¤ê°€ ë°œí–‰ë˜ë©´, í•´ë‹¹ ì´ë²¤íŠ¸ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë©”ì„œë“œì— ë¶™ì—¬ ë™ì‘ì„ íŠ¸ë¦¬ê±°í•©ë‹ˆë‹¤.

---

## ğŸ§± ë™ì‘ êµ¬ì¡°

1. **ì´ë²¤íŠ¸ í´ë˜ìŠ¤ ì •ì˜ (POJO)**

   ```java
   public class UserCreatedEvent {
       private final User user;

       public UserCreatedEvent(User user) {
           this.user = user;
       }

       public User getUser() {
           return user;
       }
   }
   ```

2. **ì´ë²¤íŠ¸ ë°œí–‰ (Event Publishing)**

   ```java
   @Service
   public class UserService {
       private final ApplicationEventPublisher publisher;

       public UserService(ApplicationEventPublisher publisher) {
           this.publisher = publisher;
       }

       public void registerUser(User user) {
           // ì‚¬ìš©ì ë“±ë¡ ë¡œì§
           publisher.publishEvent(new UserCreatedEvent(user));
       }
   }
   ```

3. **ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì‘ì„± (Event Listener)**

   ```java
   @Component
   public class UserEventListener {

       @EventListener
       public void onUserCreated(UserCreatedEvent event) {
           User user = event.getUser();
           // ì˜ˆ: í™˜ì˜ ì´ë©”ì¼ ë°œì†¡
           System.out.println("Welcome email sent to: " + user.getEmail());
       }
   }
   ```

---

## ğŸ§µ ë¹„ë™ê¸° ì²˜ë¦¬: `@Async`ì™€ í•¨ê»˜ ì‚¬ìš©

```java
@Async
@EventListener
public void handleEventAsync(UserCreatedEvent event) {
    // ë¹„ë™ê¸°ë¡œ ì‹¤í–‰
}
```

* `@EnableAsync` ì„¤ì •ì´ í•„ìš”

---

## ğŸ” ì‚¬ìš© ì‹œê¸°

| ìƒí™©                      | ì´ìœ                                 |
| ----------------------- | --------------------------------- |
| ì‚¬ìš©ì ê°€ì… í›„ í›„ì²˜ë¦¬ (ì´ë©”ì¼ ë°œì†¡ ë“±) | ì£¼ ë¡œì§ê³¼ í›„ì²˜ë¦¬ë¥¼ ë¶„ë¦¬í•˜ì—¬ ê´€ì‹¬ì‚¬ ë¶„ë¦¬            |
| ì£¼ë¬¸ ì™„ë£Œ í›„ ì¬ê³  ì°¨ê°           | ì´ë²¤íŠ¸ ì¤‘ì‹¬ì˜ ì—…ë¬´ íë¦„ ì„¤ê³„                  |
| ë„ë©”ì¸ ì´ë²¤íŠ¸ ì ìš© (DDD)        | Aggregate Rootê°€ Eventë¥¼ ë°œí–‰í•˜ëŠ” ë°©ì‹ êµ¬í˜„ |

---

## âœ… ì¥ì 

* ë°œí–‰ìì™€ ìˆ˜ì‹ ìì˜ **ê²°í•©ë„ ê°ì†Œ**
* ì´ë²¤íŠ¸ ìˆ˜ì‹ ì **ììœ ë¡­ê²Œ ì¶”ê°€/ë³€ê²½ ê°€ëŠ¥**
* ë³µì¡í•œ íŠ¸ëœì­ì…˜ íë¦„ ì—†ì´ **ìœ ì—°í•œ ì„¤ê³„ ê°€ëŠ¥**
* ë¹„ë™ê¸° í™•ì¥ ìš©ì´ (`@Async` í™œìš©)

---

## âš ï¸ ì£¼ì˜ì‚¬í•­

* ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆì—ì„œ ì˜ˆì™¸ ë°œìƒ ì‹œ ì „ì²´ íë¦„ì— ì˜í–¥ ì¤„ ìˆ˜ ìˆìœ¼ë¯€ë¡œ **try-catch** ì‚¬ìš© ê¶Œì¥
* **ë„ë©”ì¸ ì´ë²¤íŠ¸ì™€ ì–´í”Œë¦¬ì¼€ì´ì…˜ ì´ë²¤íŠ¸ëŠ” ëª©ì ì´ ë‹¤ë¥´ë¯€ë¡œ êµ¬ë¶„ í•„ìš”**
* íŠ¸ëœì­ì…˜ ì „íŒŒ ì—¬ë¶€ ê³ ë ¤ í•„ìš” (`@TransactionalEventListener` ì‚¬ìš© ê°€ëŠ¥)

---

## ğŸ’¡ ì‹¤ì „ íŒ

* ì´ë²¤íŠ¸ëŠ” **ë¶ˆë³€ ê°ì²´(immutable)** ë¡œ ì •ì˜í•  ê²ƒ
* ì—¬ëŸ¬ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ ë™ì‹œì— ë“±ë¡í•´ë„ ë¬¸ì œ ì—†ìŒ (ë³µìˆ˜ ì²˜ë¦¬ ê°€ëŠ¥)
* Springì˜ ê¸°ë³¸ ì´ë²¤íŠ¸ë„ ì¡´ì¬í•¨: `ContextRefreshedEvent`, `ApplicationReadyEvent` ë“±

---

## ğŸ”š ê²°ë¡ 

`@EventListener`ëŠ” ë‹¨ìˆœí•œ ë¹„ì¦ˆë‹ˆìŠ¤ ì´ë²¤íŠ¸ë¶€í„° ë³µì¡í•œ ë„ë©”ì¸ ì´ë²¤íŠ¸ê¹Œì§€ ë‹¤ì–‘í•˜ê²Œ í™œìš©í•  ìˆ˜ ìˆìœ¼ë©°, ê´€ì‹¬ì‚¬ ë¶„ë¦¬ì™€ ìœ ì§€ë³´ìˆ˜ì„±ì„ í–¥ìƒì‹œí‚¤ëŠ” ë° ê°•ë ¥í•œ ë„êµ¬ì…ë‹ˆë‹¤.
